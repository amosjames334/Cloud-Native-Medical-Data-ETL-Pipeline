executor: KubernetesExecutor
env:
  - name: AIRFLOW__CORE__LOAD_EXAMPLES
    value: "False"
  - name: AWS_DEFAULT_REGION
    value: "us-east-1"

# Disable embedded PostgreSQL (broken image)
postgresql:
  enabled: false

# Use external PostgreSQL connection
data:
  metadataConnection:
    user: airflow
    pass: airflow
    protocol: postgresql
    host: host.docker.internal
    port: 5432
    db: airflow

# Enable Git-Sync for DAGs
dags:
  gitSync:
    enabled: true
    repo: https://github.com/amosjames334/Cloud-Native-Medical-Data-ETL-Pipeline.git
    branch: main
    rev: HEAD
    depth: 1
    maxFailures: 0
    subPath: "dags"
    wait: 60